<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CLOUDHALL</title>
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/yunshangnanchen/Project-Files_yunshang/refs/heads/main/public/logo.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100;300;400;700&family=Noto+Sans+SC:wght@100;300;400;700&family=JetBrains+Mono:wght@100;400&display=swap');

        :root {
            --bg: #ffffff;
            --fg: #000000;
            --accent: #0066ff;
            --muted: #f5f5f7;
            --border: #e5e5e7;
            --transition-speed: 0.8s;
        }

        html { scroll-behavior: smooth; }

        /* --- Preloader --- */
        #preloader {
            position: fixed;
            inset: 0;
            background: var(--bg);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity 1s cubic-bezier(0.65, 0, 0.35, 1);
        }
        #preloader.fade-out { opacity: 0; pointer-events: none; }
        
        .progress-bar-container {
            width: 200px;
            height: 1px;
            background: rgba(128, 128, 128, 0.1);
            position: relative;
            overflow: hidden;
        }
        .progress-bar-fill {
            position: absolute;
            left: 0; top: 0; height: 100%; width: 0%;
            background: var(--fg);
            transition: width 2s cubic-bezier(0.22, 1, 0.36, 1);
        }
        .loading-text {
            font-size: 8px;
            text-transform: uppercase;
            letter-spacing: 0.3em;
            margin-top: 12px;
            font-weight: bold;
            color: #888;
        }

        /* --- Animations --- */
        .reveal {
            opacity: 0 !important;
            transform: translateY(30px) !important;
            transition: opacity 1.2s cubic-bezier(0.22, 1, 0.36, 1), 
                        transform 1.2s cubic-bezier(0.22, 1, 0.36, 1);
        }
        .reveal.active {
            opacity: 1 !important;
            transform: translateY(0) !important;
        }

        .minimal-line {
            height: 1px;
            background: var(--border);
            width: 100%;
            transform-origin: left;
            transform: scaleX(0);
            transition: transform 1.5s cubic-bezier(0.65, 0, 0.35, 1);
        }
        .minimal-line.active { transform: scaleX(1); }

        .vision-fade {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 1.2s cubic-bezier(0.16, 1, 0.3, 1), 
                        transform 1.2s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .vision-fade.active {
            opacity: 1;
            transform: translateY(0);
        }

        .title-reveal {
            display: inline-block;
            overflow: hidden;
            vertical-align: bottom;
        }
        .title-reveal span {
            display: inline-block;
            transform: translateY(110%);
            transition: transform 1s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .active .title-reveal span {
            transform: translateY(0);
        }

        .delay-nav { transition-delay: 0.1s; }
        .delay-1 { transition-delay: 0.2s; }
        .delay-2 { transition-delay: 0.3s; }
        .delay-3 { transition-delay: 0.4s; }
        .delay-4 { transition-delay: 0.5s; }
        .delay-5 { transition-delay: 0.6s; }

        /* --- Theme Colors --- */
        body.project-theseus { --bg: #ffffff; --fg: #000000; --accent: #0066ff; --muted: #f5f5f7; --border: #e5e5e7; }
        body.project-atlantis { --bg: #001a2c; --fg: #e0f2fe; --accent: #0ea5e9; --muted: rgba(14, 165, 233, 0.1); --border: rgba(14, 165, 233, 0.2); }
        body.project-genetic { --bg: #f9fbf9; --fg: #1a2e1a; --accent: #8db600; --muted: #edf2ed; --border: #d1ddd1; }

        @media (prefers-color-scheme: dark) {
            body.project-theseus { --bg: #0a0a0a; --fg: #ffffff; --accent: #3399ff; --muted: #1a1a1c; --border: #2c2c2e; }
        }

        body {
            background-color: var(--bg);
            color: var(--fg);
            font-family: 'Inter', 'Noto Sans SC', sans-serif;
            transition: background-color var(--transition-speed);
        }

        canvas#scene {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; 
            opacity: 0.8; /* 稍微提高透明度 */
            pointer-events: none;
            display: block;
        }

        .project-btn { transition: all 0.3s ease; opacity: 0.4; cursor: pointer; }
        .project-btn.active { color: var(--accent); opacity: 1 !important; font-weight: bold; }
        .nav-anchor-btn { transition: all 0.3s ease; opacity: 0.4; }
        .nav-anchor-btn:hover { opacity: 1; color: var(--accent); }

        .stat-card {
            padding: 1.5rem;
            border: 1px solid var(--border);
            background: var(--muted);
            backdrop-filter: blur(8px);
        }

        /* --- Modals --- */
        #custom-modal {
            position: fixed; inset: 0; z-index: 10000;
            background: rgba(0,0,0,0.6); backdrop-filter: blur(15px);
            display: none; align-items: center; justify-content: center;
            opacity: 0; transition: opacity 0.3s ease;
        }
        #custom-modal.show { opacity: 1; display: flex; }
        .modal-card {
            background: var(--bg); border: 1px solid var(--border); padding: 2.5rem;
            max-width: 450px; width: 90%; transform: scale(0.9) translateY(20px);
            transition: transform 0.4s cubic-bezier(0.22, 1, 0.36, 1);
        }
        #custom-modal.show .modal-card { transform: scale(1) translateY(0); }

        .error-code-block {
            background: rgba(0,0,0,0.05); border-left: 2px solid var(--accent);
            padding: 1rem; margin-top: 1.5rem; font-family: 'JetBrains Mono', monospace;
            font-size: 11px; color: var(--accent);
        }

        /* --- Crash Screen --- */
        @keyframes glitch {
            0% { transform: translate(0); }
            20% { transform: translate(-3px, 3px); }
            40% { transform: translate(-3px, -3px); }
            60% { transform: translate(3px, 3px); }
            80% { transform: translate(3px, -3px); }
            100% { transform: translate(0); }
        }
        .crashing { animation: glitch 0.1s linear infinite; }
        #crash-overlay {
            position: fixed; inset: 0; background: #ff0000; z-index: 11000;
            display: none; flex-direction: column; align-items: center; justify-content: center;
            color: #ffffff; font-family: 'JetBrains Mono', monospace;
        }

        #main-content { opacity: 0; transition: opacity 0.8s ease; }
        #main-content.visible { opacity: 1; }
        ::selection { background: var(--accent); color: white; }
    </style>
</head>
<body class="antialiased overflow-x-hidden project-theseus">
    <div id="preloader">
        <div class="progress-bar-container">
            <div class="progress-bar-fill" id="bar"></div>
        </div>
        <div class="loading-text">Initializing Systems</div>
    </div>

    <div id="custom-modal" onclick="closeModal()">
        <div class="modal-card" onclick="event.stopPropagation()">
            <div class="flex items-center justify-between mb-6">
                <div class="text-[10px] uppercase tracking-[0.3em] opacity-40">System Message</div>
                <div class="w-2 h-2 rounded-full bg-red-500 animate-pulse"></div>
            </div>
            <p id="modal-text" class="text-sm font-medium leading-relaxed"></p>
            <div class="error-code-block">
                <div class="opacity-40 mb-1">// SYSTEM_ERROR_LOG</div>
                <div id="error-code-content"></div>
            </div>
            <button onclick="closeModal()" class="mt-8 w-full py-3 bg-[var(--fg)] text-[var(--bg)] text-[9px] uppercase tracking-widest font-bold">关闭窗口</button>
        </div>
    </div>

    <div id="crash-overlay">
        <div class="text-6xl font-bold mb-4 tracking-tighter">CRITICAL FAILURE</div>
        <div class="text-xl mb-8 opacity-80 uppercase tracking-widest">链接崩溃 / 链接丢失 (404)</div>
        <div class="text-[10px] mb-12 opacity-70 max-w-md text-center">ERRORCODE: 0x000492_CONNECTION_TERMINATED</div>
        <button onclick="window.location.href='https://yunshangnanchen.github.io/Project-Files_yunshang/'" class="px-8 py-4 border border-white text-white font-bold uppercase tracking-[0.3em] text-xs">REESTABLISH CONNECTION</button>
    </div>

    <canvas id="scene"></canvas>

    <nav id="top-nav" class="fixed top-0 w-full z-50 px-6 py-8 md:px-12 flex flex-col md:flex-row justify-between items-start md:items-end gap-6 reveal delay-nav">
        <div class="flex flex-col">
            <div class="text-xs font-bold tracking-tighter uppercase mb-4 mix-blend-difference">Cloudhall <br> Initiative</div>
            <div class="flex space-x-4 text-[9px] uppercase tracking-widest font-bold">
                <button onclick="switchProject('theseus')" class="project-btn active" id="btn-theseus">忒休斯计划</button>
                <button onclick="switchProject('atlantis')" class="project-btn" id="btn-atlantis">亚特兰蒂斯计划</button>
                <button onclick="switchProject('genetic')" class="project-btn" id="btn-genetic">基因工程计划</button>
            </div>
        </div>
        <div class="flex items-center gap-12">
            <div class="hidden md:flex space-x-8 text-[9px] uppercase tracking-[0.3em] font-bold mix-blend-difference">
                <a href="#vision" class="nav-anchor-btn">Vision</a>
                <a href="#vessel" class="nav-anchor-btn">Technical</a>
                <a href="#log" class="nav-anchor-btn">Archive</a>
            </div>
            <div class="text-[10px] uppercase tracking-widest opacity-40 mix-blend-difference">
                Node: <span id="current-project-name">Theseus</span> / 2056
            </div>
        </div>
    </nav>

    <main id="main-content">
        <section id="vision" class="min-h-screen flex flex-col justify-center px-6 md:px-12 pt-24">
            <div class="minimal-line mb-12 reveal delay-1"></div>
            <div class="vision-content-wrapper min-h-[400px]">
                <span class="text-[0.7rem] uppercase tracking-[0.3em] mb-4 block vision-fade delay-2" style="color: var(--accent)" id="dynamic-tag">Classification: Top Secret</span>
                <h1 class="font-extralight text-[4rem] md:text-[6.5rem] leading-[0.85] mb-12 vision-fade delay-3" id="dynamic-title"></h1>
                <div class="grid md:grid-cols-2 gap-12 max-w-5xl">
                    <p class="text-lg md:text-xl font-light leading-relaxed opacity-80 vision-fade delay-4" id="dynamic-desc"></p>
                    <div class="flex flex-col justify-end vision-fade delay-5">
                        <div class="text-[10px] uppercase tracking-widest opacity-40 mb-4 font-mono">Status: <span class="animate-pulse">Active</span></div>
                        <div class="flex space-x-4">
                            <button onclick="handleApplication()" class="px-8 py-3 bg-[var(--fg)] text-[var(--bg)] text-[10px] uppercase font-bold tracking-widest hover:opacity-80 transition">Eligibility inquiry</button>
                            <button onclick="handleSecretAccess()" class="px-8 py-3 border border-[var(--border)] text-[10px] uppercase font-bold tracking-widest hover:bg-[var(--muted)] transition">Encrypted connection</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="vessel" class="py-32 px-6 md:px-12">
            <div class="minimal-line mb-16 reveal"></div>
            <div class="flex items-center gap-4 mb-20 opacity-40 reveal">
                <span class="text-[10px] font-mono">01 / ENGINEERING DATA</span>
                <div class="h-[1px] flex-grow bg-current"></div>
                <span class="text-[10px] uppercase tracking-widest" id="tech-header">曲率引擎系统</span>
            </div>
            <div id="tech-container"></div>
        </section>

        <section id="log" class="py-32 px-6 md:px-12 max-w-7xl mx-auto">
            <div class="minimal-line mb-16 reveal"></div>
            <h2 class="text-3xl font-bold tracking-tighter mb-16 reveal">计划历史日志</h2>
            <div id="log-container"></div>
        </section>
    </main>

    <footer class="py-24 px-6 md:px-12 border-t border-[var(--border)] opacity-30 text-[9px] uppercase tracking-[0.4em] font-bold">
        Cloudhall Industries / <span id="footer-tag">THESEUS</span>
    </footer>

    <script>
        let currentProjectId = 'theseus';
            const projectData = {
                theseus: {
                    name: "Theseus",
                    tag: "Classification: Top Secret / Deep Space",
                    title: ["人类火种", "最后避难所"],
                    desc: "我们正在建造的不只是一艘星舰，而是一个可跨越千年的数字与物质双重箱庭。它被设计为可预测、可回滚、可放弃的人类未来。",
                    techHeader: "曲率引擎系统",
                    specs: [
                        { label: "引擎状态", value: "驱动就绪（Δπ校准中）" },
                        { label: "时间漂移", value: "< 0.0003% / 年" },
                        { label: "能耗比例", value: "0.004% / 年" },
                        { label: "居住密度", value: "85,000 人 / 模块" },
                        { label: "预测依赖", value: "箱庭主时间线" }
                    ],
                    logs: [
                        { date: "2045.11.21", content: "物理常数稳定性报告：π值出现局部收敛异常，恒星爆炸不可逆。" },
                        { date: "2051.06.02", content: "发现曲率航行与因果回溯存在弱耦合关系。" },
                        { date: "2055.01.01", content: "21号方舟计划正式启动，部分权限被转移。" }
                    ]
                },

                atlantis: {
                    name: "Atlantis",
                    tag: "Classification: Restricted / Abyssal",
                    title: ["深海沉默", "蔚蓝隔离区"],
                    desc: "若星空不可抵达，深海将是最后的温床。我们在南太平洋深渊带约10000米处建立永续生态城，一个不被预测、不被祝福的文明残影。",
                    techHeader: "高压生态穹顶",
                    specs: [
                        { label: "地理位置", value: "南太平洋\n南纬 48° ～ 52°\n西经 128° ～ 134°" },
                        { label: "平均深度", value: "9,800 – 10,600 m" },
                        { label: "抗压强度", value: "1,200-1,500 Bar（冗余设计）" },
                        { label: "结构形态", value: "半生物-碳基复合体" },
                        { label: "生态循环", value: "100% 闭环（不可扩展）" },
                        { label: "主能源核心", value: "地热 + 裂变混合堆" },
                        { label: "备用能源", value: "小型聚变实验模块（封存）" }
                    ],
                    logs: [
                        { date: "2046.08.29", content: "生物基因工程支撑壁完成抗压测试" },
                        { date: "2048.03.15", content: "深渊一期结构完成，自修复材料开始适应水压。" },
                        { date: "2050.11.04", content: "生物结构与岩层融合度超过预期，回滚已不可能。" },
                        { date: "2052.09.30", content: "首批居民迁入深渊，外部通讯进入延迟模式。" },
                        { date: "2061.02.17", content: "箱庭预测模型无法覆盖当前生态演化路径。" }
                    ]
                },

                genetic: {
                    name: "Genetic",
                    tag: "Classification: Level 5 / Biological",
                    title: ["重塑莱茵", "永恒螺旋线"],
                    desc: "肉体是脆弱的变量。我们不再等待自然选择，而是主动改写人类的生存参数。进化从此变得可控。",
                    techHeader: "端粒修复矩阵",
                    specs: [
                        { label: "理论寿命", value: "300+ 年（不含异常延伸）" },
                        { label: "认知增幅", value: "+400%（存在人格偏移风险）" },
                        { label: "代谢抑制", value: "动态可控" },
                        { label: "环境适应", value: "高压 / 低光 / 高辐射" },
                        { label: "伦理状态", value: "已突破红线" }
                    ],
                    logs: [
                        { date: "2049.07.08", content: "完成基因改造生物临床测试，基础性状稳定。" },
                        { date: "2053.04.19", content: "部分受试者出现非线性认知跃迁。" },
                        { date: "2053.09.01", content: "人类临床试验阶段性融合10%" },
                        { date: "2054.12.25", content: "“新人类”草案通过审批，代号：VCB 系列。" }
                    ]
                }
            };


        function formatTitle(titleArray) {
            return titleArray.map((line, idx) => {
                const isBold = idx === 1;
                return `<div class="title-reveal ${isBold ? 'font-bold' : ''}">
                    <span style="transition-delay: ${0.4 + idx * 0.1}s">${line}</span>
                </div>${idx === 0 ? '<br>' : ''}`;
            }).join('');
        }

        function renderTechnical(id, data) {
            const container = document.getElementById('tech-container');
            container.innerHTML = "";
            if (id === 'theseus') {
                container.innerHTML = `<div class="grid grid-cols-1 md:grid-cols-3 gap-8 items-center"><div class="space-y-4 reveal delay-1"><div class="stat-card text-right"><div class="text-[9px] opacity-40 uppercase mb-1">${data.specs[0].label}</div><div class="text-xl font-bold">${data.specs[0].value}</div></div><div class="stat-card text-right"><div class="text-[9px] opacity-40 uppercase mb-1">物理版本</div><div class="text-xl font-bold">V 2.0.4</div></div></div><div class="reveal delay-2 flex justify-center"><svg viewBox="0 0 400 300" class="w-full h-auto max-h-[300px]" id="tech-svg-dynamic"></svg></div><div class="space-y-4 reveal delay-3"><div class="stat-card"><div class="text-[9px] opacity-40 uppercase mb-1">${data.specs[1].label}</div><div class="text-xl font-bold">${data.specs[1].value}</div></div><div class="stat-card"><div class="text-[9px] opacity-40 uppercase mb-1">${data.specs[2].label}</div><div class="text-xl font-bold">${data.specs[2].value}</div></div></div></div>`;
            } else if (id === 'atlantis') {
                container.innerHTML = `<div class="flex flex-col gap-12"><div class="grid md:grid-cols-2 gap-16 items-center reveal delay-1"><svg viewBox="0 0 600 200" id="tech-svg-dynamic" class="w-full"></svg><div class="border-l-4 border-[var(--accent)] pl-8 py-2"><h3 class="text-3xl font-light tracking-tight mb-4">超压物理屏障</h3><p class="opacity-50 text-sm leading-relaxed">承受极限海床压力，将深海转化为最后的避风港。采用自修复纳米陶瓷材料。</p></div></div><div class="grid grid-cols-1 md:grid-cols-3 gap-6 reveal delay-2">${data.specs.map(s => `<div class="p-8 border border-[var(--border)] bg-[var(--muted)] flex flex-col justify-between h-40"><div class="text-[10px] opacity-30 uppercase tracking-widest">${s.label}</div><div class="text-3xl font-bold tracking-tighter">${s.value}</div></div>`).join('')}</div></div>`;
            } else {
                container.innerHTML = `<div class="grid grid-cols-1 md:grid-cols-3 gap-8"><div class="md:col-span-2 bg-[var(--muted)] p-12 border border-[var(--border)] reveal delay-1 flex flex-col justify-between"><svg viewBox="0 0 600 250" id="tech-svg-dynamic" class="w-full opacity-40"></svg><div class="mt-8 text-[9px] font-mono opacity-50">ENCODING_SEQUENCE: [TAG_ACTIVE]</div></div><div class="flex flex-col justify-between space-y-8 reveal delay-2">${data.specs.map(s => `<div class="relative group"><div class="h-[1px] w-0 group-hover:w-full bg-[var(--accent)] transition-all duration-700 absolute -top-4"></div><div class="text-[10px] opacity-40 mb-2 uppercase tracking-widest">${s.label}</div><div class="text-4xl font-bold tracking-tighter">${s.value}</div></div>`).join('')}</div></div>`;
            }
            drawSVG(id);
        }

        function drawSVG(id) {
            const svg = document.getElementById('tech-svg-dynamic');
            if(!svg) return;
            svg.innerHTML = "";
            if(id === 'theseus') {
                svg.innerHTML = `<circle cx="200" cy="150" r="80" fill="none" stroke="currentColor" stroke-width="0.5" stroke-dasharray="8 4" /><path d="M100,150 L300,150 M200,50 L200,250" stroke="currentColor" stroke-width="0.5" opacity="0.3"/><rect x="180" y="70" width="40" height="160" fill="none" stroke="currentColor" stroke-width="1.5" />`;
            } else if(id === 'atlantis') {
                svg.innerHTML = `<path d="M50,50 Q300,250 550,50" fill="none" stroke="currentColor" stroke-width="1" /><path d="M50,80 Q300,280 550,80" fill="none" stroke="currentColor" stroke-width="0.5" opacity="0.4" /><circle cx="300" cy="150" r="15" fill="currentColor" />`;
            } else {
                let d = ""; for(let i=0; i<6; i++) { d += `<line x1="100" y1="${50+i*30}" x2="500" y2="${50+i*30}" stroke="currentColor" stroke-width="0.5"/><circle cx="${100+i*80}" cy="${50+i*30}" r="4" fill="currentColor" />`; }
                svg.innerHTML = d;
            }
        }

        function switchProject(id) {
            if (id === currentProjectId) return;
            currentProjectId = id;
            const data = projectData[id];
            const mainContent = document.getElementById('main-content');
            const visionFades = mainContent.querySelectorAll('.vision-fade');
            const techArchiveReveals = mainContent.querySelectorAll('#vessel .reveal, #log .reveal, .minimal-line');
            
            visionFades.forEach(el => el.classList.remove('active'));
            techArchiveReveals.forEach(el => el.classList.remove('active'));
            mainContent.classList.remove('visible');

            setTimeout(() => {
                document.body.className = `antialiased overflow-x-hidden project-${id}`;
                document.getElementById('current-project-name').innerText = data.name;
                document.getElementById('dynamic-tag').innerText = data.tag;
                document.getElementById('dynamic-title').innerHTML = formatTitle(data.title);
                document.getElementById('dynamic-desc').innerText = data.desc;
                document.getElementById('tech-header').innerText = data.techHeader;
                document.getElementById('footer-tag').innerText = data.name.toUpperCase();
                renderTechnical(id, data);
                document.getElementById('log-container').innerHTML = data.logs.map(log => `<div class="group border-b py-8 flex justify-between items-center px-6 border-[var(--border)] hover:bg-[var(--muted)] transition reveal"><span class="font-mono text-[10px] opacity-40">${log.date}</span><span class="text-sm font-medium">${log.content}</span><span class="text-[9px] uppercase border px-2 py-1 border-[var(--accent)] text-[var(--accent)]">Verified</span></div>`).join('');
                document.querySelectorAll('.project-btn').forEach(btn => btn.classList.remove('active'));
                document.getElementById(`btn-${id}`).classList.add('active');
                mainContent.classList.add('visible');
                window.scrollTo({ top: 0, behavior: 'smooth' });
                setTimeout(() => {
                    visionFades.forEach(el => el.classList.add('active'));
                    initScrollReveals();
                }, 100);
            }, 700); 
        }

        function showModal(title, text, errorCode) {
            const modal = document.getElementById('custom-modal');
            document.getElementById('modal-text').innerHTML = `<strong>${title}</strong><br><br>${text}`;
            document.getElementById('error-code-content').innerText = errorCode;
            modal.style.display = 'flex';
            setTimeout(() => modal.classList.add('show'), 10);
        }
        function closeModal() {
            const modal = document.getElementById('custom-modal');
            modal.classList.remove('show');
            setTimeout(() => modal.style.display = 'none', 300);
        }
        function handleApplication() { if (currentProjectId === 'theseus') showModal("ACCESS DENIED", "申请查询被拒绝，未到开放时间。", "Status: 403 Forbidden"); else triggerCrash(); }
        function handleSecretAccess() { showModal("ENCRYPTED TUNNEL REQUIRED", "数据链路校验不通过！请跟换代理加密服务器。", "Error: SEC_UNTRUSTED_NODE"); }
        function triggerCrash() {
            const overlay = document.getElementById('crash-overlay');
            overlay.style.display = 'flex'; overlay.classList.add('crashing');
            document.getElementById('main-content').style.visibility = 'hidden';
            setTimeout(() => overlay.classList.remove('crashing'), 300);
        }
        function rebootSystem() {
            document.getElementById('crash-overlay').style.display = 'none';
            document.getElementById('main-content').style.visibility = 'visible';
            switchProject('theseus');
        }

        function initScrollReveals() {
            const obs = new IntersectionObserver((es) => {
                es.forEach(e => { if (e.isIntersecting) e.target.classList.add('active'); });
            }, { threshold: 0.1 });
            document.querySelectorAll('#main-content .reveal, #main-content .minimal-line, footer').forEach(el => obs.observe(el));
        }

        /* --- Enhanced Particle System --- */
        const canvas = document.getElementById('scene');
        const ctx = canvas.getContext('2d');
        let pts = [];
        let mouse = { x: null, y: null };
        
        function resize() { 
            canvas.width = window.innerWidth; 
            canvas.height = window.innerHeight; 
            if (pts.length === 0) createPoints();
        }

        function createPoints() {
            pts = [];
            const count = 180; // 增加点位数量 (原为 60)
            for(let i=0; i<count; i++) {
                pts.push({
                    x: Math.random() * window.innerWidth, 
                    y: Math.random() * window.innerHeight, 
                    vx: (Math.random() - 0.5) * 0.6, 
                    vy: (Math.random() - 0.5) * 0.6,
                    r: Math.random() * 2 + 1.5 // 增加粒子半径 (原为 1.2)
                });
            }
        }

        function animate() {
            const accent = getComputedStyle(document.body).getPropertyValue('--accent').trim() || '#0066ff';
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = accent; 
            ctx.fillStyle = accent;

            pts.forEach((p, i) => {
                // 粒子移动
                p.x += p.vx; p.y += p.vy;
                
                // 边界检测
                if(p.x < 0 || p.x > canvas.width) p.vx *= -1; 
                if(p.y < 0 || p.y > canvas.height) p.vy *= -1;
                
                // 绘制粒子
                ctx.globalAlpha = 0.5; 
                ctx.beginPath(); 
                ctx.arc(p.x, p.y, p.r, 0, Math.PI*2); 
                ctx.fill();

                // 鼠标交互感应
                if (mouse.x !== null) {
                    let md = Math.hypot(p.x - mouse.x, p.y - mouse.y);
                    if (md < 150) {
                        ctx.globalAlpha = (1 - md/150) * 0.4;
                        ctx.beginPath();
                        ctx.moveTo(p.x, p.y);
                        ctx.lineTo(mouse.x, mouse.y);
                        ctx.stroke();
                    }
                }

                // 连线逻辑
                for(let j=i+1; j<pts.length; j++){
                    let d = Math.hypot(p.x - pts[j].x, p.y - pts[j].y);
                    if(d < 150){ 
                        ctx.globalAlpha = (1 - d/150) * 0.25; // 增加连线透明度 (原为 0.15)
                        ctx.lineWidth = 0.8; // 增加线宽 (原为 0.5)
                        ctx.beginPath(); 
                        ctx.moveTo(p.x, p.y); 
                        ctx.lineTo(pts[j].x, pts[j].y); 
                        ctx.stroke(); 
                    }
                }
            });
            requestAnimationFrame(animate);
        }

        window.onload = () => {
            const bar = document.getElementById('bar');
            setTimeout(() => bar.style.width = '100%', 100);
            setTimeout(() => {
                document.getElementById('preloader').classList.add('fade-out');
                document.getElementById('main-content').classList.add('visible');
                document.getElementById('dynamic-title').innerHTML = formatTitle(projectData.theseus.title);
                document.getElementById('dynamic-desc').innerText = projectData.theseus.desc;
                renderTechnical('theseus', projectData.theseus);
                setTimeout(() => {
                    document.querySelectorAll('.reveal, .minimal-line, .vision-fade').forEach(el => el.classList.add('active'));
                }, 100);
                initScrollReveals();
                
                resize();
                createPoints();
                animate();
            }, 2500);
        };
        
        window.addEventListener('resize', resize);
        window.addEventListener('mousemove', (e) => {
            mouse.x = e.clientX;
            mouse.y = e.clientY;
        });
        window.addEventListener('mouseleave', () => {
            mouse.x = null;
            mouse.y = null;
        });
    </script>
</body>
</html>