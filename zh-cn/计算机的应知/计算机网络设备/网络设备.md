# 如何理解计算机网络设备（交换机、路由器、防火墙等）

最近发现身边有很多跟我一样学计算机的对计算机网络设备不是很了解，所以打算写一篇关于介绍计算机网络设备的文章。建议学习完计算机网络OSI参考模型前学习此文章。

就目前而言计算机网络设备主要是有网卡、交换机、路由器、防火墙、调制解调器、网桥、传输介质。

# 1. 网卡：
网卡（Network Interface Card，NIC），又称网络适配器，是计算机与计算机网络通信的接口设备。它通过 PCIe 接口连接到电脑上，随后可使用网线连接至交换机。如今，多数主板都集成了板载网卡，因此一般情况下无需额外购买网卡。
![普通网卡](/3123.png)
> 如图：左边是普通网卡，右边是模块化网卡

PCIe 网卡主要分为两类：一类是普通的以太网 RJ45 接口网卡使用**双绞线**进行连接，另一类是光纤网卡，通过光纤进行连接。**模块化网卡能够安装不同模块，实现 RJ45 接口和光纤接口的自由切换。**

PCIe还有一种无限网卡一般用于需要无线传输的情况，如蓝牙、WiFi等。这些网卡都位于计算机网络OSI参考模型的**第二层数据链路层**。

# 2. 交换机：

交换机（Switch）是一种用于电（光）信号转发的网络设备，其作用是连接多台网络设备，实现多台设备间的通信。

现在交换机主要分为二层交换机和三层交换机

二层交换机工作在数据链路层，主要基于**MAC地址**来转发**数据帧**。当一个数据帧进入交换机时，交换机首先会学习数据帧中的**源 MAC 地址**，
并将其与该数据帧进入交换机的端口号进行关联记录在自己的 MAC 地址表中。

- 例如，计算机 A 通过端口 1 发送一个数据帧到交换机，交换机就会记录计算机 A 的 MAC 地址和端口 1 的对应关系。

三层交换机是带有**部分路由器功能**的交换机，它工作在网络层和数据链路层。它在二层交换机的基础上，增加了基于 IP 地址的数据包转发功能。当收到一个数据包时，三层交换机首先查看数据包的目的 IP 地址。如果目的 IP 地址与源 IP 地址在同一网段，它会像二层交换机一样，根据 MAC 地址表进行转发；如果目的 IP 地址与源 IP 地址不在同一网段，它会使用路由表进行路由选择，确定转发端口，然后将数据包转发出去。

![](/3123.jpg)

## 与集线器的比较

集线器工作在物理层，它只是简单地将接收到的信号进行**广播转发**

- 广播转发也就是广播域，本质就是将连接到集线器的设备都发送一个数据包，如果是本机的数据包啧接受不是则丢弃。不能同时进行多个广播转发否则会出现冲突域。

所有连接到集线器的设备共享带宽。而交换机工作在数据链路层，<u>能够识别 MAC 地址并进行有针对性的转发</u>，每个端口都有**独立的带宽**，因此交换机在网络性能上远远优于集线器。

# 路由器

路由器（Router）是一种用于连接多个网络，并在不同网络之间转发数据包的网络设备。其目的主要是连接外部互联网和内部网络，从而实现网络间的通信。

根据应用场景分类

- **家用路由器**：主要用于家庭网络环境，<u>集成了 Wi - Fi 接入、NAT、DHCP 等。家用路由器的无线功能比较重要</u>，一般支持 2.4GHz 和 / 或 5GHz 频段的 Wi - Fi 信号，能够满足家庭中大部分的设备。其端口数量相对较少，通常有 4 - 5 个 LAN 端口用于连接有线设备。
- **企业路由器**：用于企业网络环境，具有更高的性能和更复杂的功能。能够处理更高的网络流量。部分企业路由器具备高级的路由功能，如<u>支持多种路由协议、VLAN（Virtual Local Area Network）间路由等</u>。企业路由器还通常具有更好的安全性和可靠性，例如支持更强大的防火墙功能、冗余备份等，以确保企业网络的不间断运行。
- **边缘路由器**：位于网络边缘，一般用于连接企业网络或园区网络与外部的广域网（如互联网）。边缘路由器需要处理来自不同网络的大量数据流量，并根据网络策略进行路由选择。它还需要具备强大的安全功能，如防止外部网络的入侵、过滤恶意流量等。

![](/2.jpg)

## 路由器其他网络设备的关系

### 与交换机的关系

交换机主要用于连接同一网络中的多个设备，构建局域网，工作在**数据链路层**。路由器则用于连接不同的网络，工作在**网络层**。在一个网络环境中，交换机和路由器通常会配合使用。
例如，在企业网络中，交换机将企业内部的计算机、服务器等设备连接起来形成局域网，路由器则将企业局域网与外部网络（如互联网）连接起来，并且在不同局域网
之间（如企业不同部门的局域网）进行数据转发。

### 与调制解调器的关系

调制解调器（Modem）主要<u>用于将数字信号和模拟信号进行转换</u>。在通过电话线、有线电视线等方式接入互联网时，需要先使
用调制解调器将**网络信号**转换为计算机能够识别的**数字信号**。路由器则在调制解调器之后，接收数字信号并进行网络连接和数据包转发等操作。

在光纤接入互联网的情况下，有些光纤调制解调器和路由器会集成在一起，简化了设备连接和网络设置的过程。

# 防火墙

防火墙（Firewall）是一种位于内部网络与外部网络之间的网络安全系统，用于监控和控制进出网络的通信流量。作用是防止网络攻击，如拒绝不合法的数据包、过滤垃圾邮件等。

![](/R-C.jpg)

## 工作原理

### 包过滤（Packet Filtering）

- 这是防火墙最基本的功能。防火墙会检查每个通过它的数据包的头部信息，如源 IP 地址、目的 IP 地址、源端口、目的端口和协议类型（如 TCP、UDP）等。根据预先定义的规则，决定是否允许该数据包通过。例如，企业可以设置规则，只允许来自特定 IP 地址范围的设备访问内部网络的特定服务器端口，其他不符合规则的数据包则被丢弃。
- 包过滤可以基于状态进行。状态检测防火墙（Stateful Inspection Firewall）会跟踪每个连接的状态。它不仅检查数据包的头部信息，还会考虑数据包所属的连接状态。例如，对于一个已经建立的 TCP 连接，防火墙会记住这个连接的状态，允许属于这个连接的后续数据包通过，直到连接关闭。

主要功能：访问控制、防止外部攻击、网络地址转换（NAT）与隐藏内部网络结构、安全策略实施和审计。

## 调制解制器

调制解调器（Modem）现在是我们家中的光猫（光网络单元Ontical Network Terminal，ONT），是一种能够在数字信号和模拟信号之间进行转换的设备，**主要用于将光纤入户的光信号（模拟信号）转换成数字信号**。

### 工作原理

### 调制过程（数字信号转模拟信号）

当计算机等数字设备需要通过模拟通信线路（如电话线）发送数据时，调制解调器将数字信号转换为模拟信号。它通过改变模拟信号的某些特性（如幅度、频率或相位）来实现这一目的。例如，在幅度调制（AM）中，模拟信号的幅度会根据数字信号的变化而变化；在频率调制（FM）中，模拟信号的频率会随着数字信号的逻辑电平而改变；相位调制（PM）则是使模拟信号的相位根据数字信号进行调整。
以常见的拨号上网为例，计算机中的数字信号通过调制解调器的调制功能，将 0 和 1 的数字序列转换为可以在电话线上传输的模拟音频信号。

### 解调过程（模拟信号转数字信号）

当模拟信号从通信线路的另一端传输过来时，调制解调器需要将其转换回数字信号，这个过程就是解调。它会检测模拟信号的特性变化，从中提取出原来的数字信号。例如，在接收到一个经过频率调制的模拟信号后，调制解调器通过检测信号频率的变化，将其转换回对应的数字信号，以便数字设备能够理解和处理。
在 ADSL（非对称数字用户线路）上网方式中，调制解调器从电话线上接收经过调制的高频模拟信号，然后将其解调为数字信号，提供给计算机或其他网络设备使用。


主要功能：光电信号转换、数据传输功能、纠错功能

# 网桥

网桥（Bridge）是一种工作在**数据链路层**的网络设备，主要用于连接两个或多个局域网（LAN）段，以实现数据帧在不同网段之间的转发。它会根据数据帧中的 MAC 地址来决定是否转发以及如何转发

## 工作原理

当一个数据帧进入网桥时，网桥首先会检查数据帧中的源 MAC 地址，并将其与接收端口关联记录在自己的 MAC 地址表中。例如，若计算机 A 通过端口 1 发送数据帧到网桥，网桥就会记录计算机 A 的 MAC 地址与端口 1 的对应关系。然后，网桥查看数据帧中的目的 MAC 地址，若目的 MAC 地址在其 MAC 地址表中有记录，且对应的端口不是接收端口，网桥就会将数据帧转发到该目的 MAC 地址对应的端口；若目的 MAC 地址不在 MAC 地址表中，网桥会将数据帧转发到除接收端口之外的所有端口，这个过程称为泛洪（Flooding）。当收到目的 MAC 地址设备的回应后，网桥会更新 MAC 地址表，以便后续更精准地转发数据帧。

主要功能：扩展网络覆盖范围、隔离冲突域、过滤和转发。

## - 与其他网络设备的比较和关联
- **与交换机的比较**：网桥和交换机有很多相似之处，它们都工作在数据链路层，都通过 MAC 地址来转发数据帧。但是交换机的功能更加强大，交换机通常有更多的端口，并且可以提供更高的端口带宽和更好的性能。例如，交换机可以同时处理多个数据帧的转发，而网桥的转发能力相对较弱。另外，交换机一般采用硬件实现数据帧的转发，速度更快，而网桥可能部分功能依赖于软件实现。
- **与路由器的关联**：网桥和路由器的工作层次不同，网桥工作在数据链路层，主要基于 MAC 地址转发；路由器工作在网络层，基于 IP 地址转发。在网络拓扑中，网桥用于连接同一类型的局域网段，主要是扩展局域网和隔离冲突域；路由器用于连接不同的网络，如局域网和广域网，并且进行网络间的路由选择。在一个复杂的网络环境中，网桥和路由器可以配合使用，例如，网桥先将多个局域网段连接并整合，然后通过路由器将这些局域网连接到外部网络或其他不同的网络。

# 传输介质

现在主要的传输介质有：双绞线、光纤、同轴电缆。

## 双绞线（Twisted - Pair）
![](/v2-2abaec54aa3ba3730c63708c9410eb0b_b.jpg)
### 结构与原理：

- 双绞线由两根具有绝缘保护层的铜导线相互绞合而成。绞合的目的是为了减少电磁干扰（EMI）和射频干扰（RFI）。每一对双绞线一般都有一
- 个绞合周期，两根导线的绞合可以使它们在传输信号时产生的电磁场相互抵消，从而降低干扰。
- 双绞线一般用于传输数字信号，信号在双绞线中以电脉冲的形式进行传输。根据传输性能和应用场景，双绞线分为不同的类别，如常见的非屏蔽双绞线（UTP）和屏蔽双绞线（STP）。

    ### 非屏蔽双绞线（UTP）：
    - UTP 没有额外的屏蔽层，价格相对较低，安装方便，是目前局域网中最常用的传输介质之一。它分为不同的类别，如 CAT5（五类线）、CAT5e（超五类线）、CAT6（六类线）等。CAT5 主要用于 100Mbps 以太网，CAT5e 可以支持 1000Mbps（1Gbps）以太网，而 CAT6 及更高类别可以支持更高的传输速率，如 10Gbps 以太网。
    - 在家庭网络和小型办公室网络中，UTP 被广泛用于连接计算机、路由器、交换机等设备，构建以太网局域网。例如，将计算机通过 UTP 连接到路由器的以太网端口，实现上网功能。
    ### 屏蔽双绞线（STP）：
    - STP 在双绞线外面包裹了一层金属屏蔽层，可以更好地抵御外界的电磁干扰。但是，由于有屏蔽层，其价格较高，安装也相对复杂，需要良好的接地。
    - STP 主要用于对电磁干扰比较敏感的环境，如工厂车间、医院的医疗设备附近等场所。在这些环境中，外部的大型电机、医疗设备等可能会产生较强的电磁干扰，STP 可以保证信号的稳定传输。

## 光纤（Optical Fiber）
![](/e04798496bfda24c623006364c3c159e.jpg)
### 结构与原理：

- 光纤是一种利用光的全反射原理来传输光信号的传输介质。它主要由纤芯、包层和护套组成。纤芯是由高纯度的二氧化硅等材料制成的，用于传导光信号；包层围绕在纤芯周围，其折射率低于纤芯，使得光信号在纤芯和包层的界面上发生全反射，从而保证光信号在纤芯中不断向前传播；护套是最外层的保护结构。
- 光纤传输光信号的优点在于光信号的频率高，因此可以实现极高的传输带宽。同时，光纤不受电磁干扰，信号传输损耗小，适合长距离传输。###

    ### 单模光纤（Single - Mode Fiber）：
    - 单模光纤的纤芯直径很小，通常在 8 - 10μm 左右，只能允许一种模式（即一个传播角度）的光进行传播。它的传输距离长，带宽高，可以达到数十 Gbps 甚至更高的传输速率，常用于长距离的高速通信，如电信运营商的长途骨干网络、数据中心之间的连接等。
    - 在跨城市或者跨区域的通信网络中，单模光纤是主要的传输介质，用于传输互联网数据、电话通信等大量的信息。
    ### 多模光纤（Multi - Mode Fiber）：
    - 多模光纤的纤芯直径较大，一般在 50 - 62.5μm 之间，允许多种模式的光同时传播。由于存在多种传播模式，会产生模间色散，限制了传输距离和带宽。其传输距离一般较短，带宽相对较低，常用于短距离、高带宽的局域网环境，如建筑物内部的网络连接。
    - 在校园网、企业内部的建筑物之间的网络连接等场景中，多模光纤可以提供较高的带宽，用于连接不同的建筑物内的网络设备。


## 同轴电缆（Coaxial Cable）

![](/R-C%20(1).jpg)

### 结构与原理：
- 同轴电缆由内导体、绝缘层、外导体（屏蔽层）和护套组成。内导体是一根实心或多股的铜导线，用于传输信号；绝缘层包裹在内导体外面，用于隔离内导体和外导体；外导体一般是一层金属网或金属箔，起到屏蔽作用；护套则是最外层的保护套。
- 同轴电缆可以传输高频信号，信号在内导体和外导体之间的绝缘层中传输。其传输原理基于电磁场的变化，当高频信号通过内导体时，会在内外导体之间产生变化的电磁场，从而实现信号的传输。

    ### 粗同轴电缆（Thick Coaxial Cable）：
    - 粗同轴电缆直径较大，传输距离较远，抗干扰能力较强。它曾经用于早期的以太网（如 10Base - 5），但由于其安装不便、成本较高等因素，现在已经很少使用。
    - 在一些大型的园区网络或企业网络的早期建设中，如果需要长距离传输信号，且对网络带宽要求不是特别高，粗同轴电缆可能会被考虑使用。
    ### 细同轴电缆（Thin Coaxial Cable）：
    - 细同轴电缆直径较小，相对容易安装，价格也较低。它也用于早期的以太网（如 10Base - 2），但随着双绞线技术的发展，其使用也逐渐减少。
    - 在一些小型的局域网扩展或者临时的网络搭建场景中，细同轴电缆可能会因为其便捷性而被选用。


以上就是本篇文章的全部内容，想要了解跟多内容可以看看我的主页或者访问[我的博客](https://yunshangnanchen.github.io)（站部署在github访问可能较慢） 关于文章的错误也可以在下方留言