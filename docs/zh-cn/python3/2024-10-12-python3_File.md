# Python3 文件操作方法

**一、`open()`方法——文件打开的利器**

在 Python 中，`open()`方法可谓是处理文件的关键工具。它能够打开一个文件，并返回一个强大的文件对象，为后续的文件操作奠定基础。然而，如果文件无法成功打开，将会抛出`OSError`异常，因此在使用时需要格外留意。

值得强调的是，使用`open()`方法后，务必记得调用`close()`方法来关闭文件对象，以确保资源的正确释放和文件的完整性。

1. **常用形式解析**：
   - 通常情况下，`open()`方法接收两个主要参数：文件名(`file`)和模式(`mode`)，例如：`open(file, mode='r')`。
   - 其完整的语法格式为：`open(file, mode='r', buffering=-1, encoding=None, errors=None, newline=None, closefd=True, opener=None)`。

2. **参数详细说明**：
    |模式|描述|
    |---|---|
    |t|默认的文本模式，适用于大多数文本文件的处理。|
    |x|写模式，若文件已存在则会报错，确保新建文件的操作安全。|
    |b|二进制模式，常用于处理非文本文件，如图片等。|
    |+|开启文件进行更新，意味着可读可写，为文件操作带来更大的灵活性。|
    |U|通用换行模式，但在 Python 3 中已不再支持。|
    |r|以只读方式打开文件，文件指针会置于文件开头，这也是默认的打开模式。|
    |rb|以二进制格式打开文件用于只读，同样文件指针置于开头，适用于非文本文件。|
    |r+|打开文件用于读写，文件指针同样在开头。|
    |rb+|以二进制格式打开文件用于读写，指针也在开头，常用于处理非文本文件。|
    |w|打开文件只用于写入，若文件存在则会从开头开始编辑，原有内容将被删除；若文件不存在，则创建新文件。|
    |wb|以二进制格式打开文件只用于写入，操作与 w 模式类似，适用于非文本文件。|
    |w+|打开文件用于读写，若文件存在则从开头编辑并删除原有内容，若不存在则创建新文件。|
    |wb+|以二进制格式打开文件用于读写，同样针对文件存在和不存在的情况进行处理，适用于非文本文件。|
    |a|打开文件用于追加内容，若文件已存在，文件指针会放在文件结尾，新内容将写在已有内容之后；若文件不存在，则创建新文件进行写入。|
    |ab|以二进制格式打开文件用于追加，操作与 a 模式类似，适用于非文本文件。|
    |a+|打开文件用于读写，若文件已存在，指针在结尾且为追加模式；若不存在，则创建新文件用于读写。|
    |ab+|以二进制格式打开文件用于追加和读写，针对文件存在和不存在的情况进行处理，适用于非文本文件。|
>默认为文本模式，若要以二进制模式打开文件，只需加上`b`即可。

**二、`file`对象——文件操作的多面手**

- `file`对象是通过`open`函数创建而来，它为文件的各种操作提供了丰富的方法。以下是`file`对象常用的函数：

    |序号|方法|描述|
    |---|---|---|
    |1|`file.close()`|此方法用于关闭文件，一旦关闭，文件将不能再进行读写操作，确保资源的合理管理。|
    |2|`file.flush()`|能够刷新文件内部缓冲，直接将内部缓冲区的数据立刻写入文件，而不是被动等待输出缓冲区写入，保证数据的及时保存。|
    |3|`file.fileno()`|返回一个整型的文件描述符（file descriptor FD 整型），可在如`os`模块的`read`方法等一些底层操作中发挥作用。|
    |4|`file.isatty()`|如果文件连接到一个终端设备，则返回`True`，否则返回`False`，用于判断文件的连接状态。|
    |5|`file.next()`|在 Python 3 中，`File`对象不再支持此方法。原本用于返回文件下一行。|
    |6|`file.read([size])`|从文件中读取指定的字节数，若未给定参数或参数为负，则读取所有内容，为读取文件数据提供了灵活的方式。|
    |7|`file.readline([size])`|读取整行内容，包括换行符“\n”，方便逐行处理文件。|
    |8|`file.readlines([sizeint])`|读取所有行并返回一个列表，若给定`sizeint>0`，则返回总和大约为`sizeint`字节的行，但实际读取值可能比`sizeint`大，因为需要填充缓冲区，适用于批量读取文件内容。|
    |9|`file.seek(offset[, whence])`|用于移动文件读取指针到指定位置，实现对文件内容的精准定位。|
    |10|`file.tell()`|返回文件当前的位置，帮助了解文件读取或写入的进度。|
    |11|`file.truncate([size])`|从文件的首行首字符开始截断，若给定`size`个字符，则截断文件为该长度；若未给定`size`，则从当前位置截断。截断后，后面的所有字符将被删除，需要注意的是，在 Windows 系统下，换行代表 2 个字符大小。|
    |12|`file.write(str)`|将字符串写入文件，返回写入的字符长度，方便了解写入操作的进度。|
    |13|`file.writelines(sequence)`|向文件写入一个序列字符串列表，但如果需要换行，则需要自行在每行加入换行符，为批量写入字符串提供了便利。|
